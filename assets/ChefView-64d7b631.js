import{I as S,z as U,r as x,J as C,_ as P,U as L,K as N,a as V,w as $,f as r,g as c,i as e,k as j,F as m,M as b,u as p,j as v,m as z,E as d,N as I,v as M,x as T}from"./index-e978c30f.js";import{_ as B}from"./SideBar-f0adbc64.js";import{c as g}from"./catchError-23a142f6.js";import{g as D,h as E}from"./order-3098547f.js";import"./LOGO_horizon-e3e3e605.js";import"./titleNo-3c0f6505.js";import"./axios-15129f52.js";const q=S("chefData",()=>{const n=U(),h=x(["未出餐","已出餐"]),s=x("未出餐"),f=x([]),i=a=>a.map(l=>{const y=l.orderList.map(_=>_.qty*_.productionTime).reduce((_,k)=>_+k,0);return{...l,totalTime:y}}),u=g(async()=>{n.isLoading=!0;const{data:a}=await D(s.value),l=i(a);f.value=l,n.isLoading=!1}),t=x({status:"已出餐"}),o=g(async a=>{const{data:l}=await E(a,t.value);C(l.status),u()});return{selectStatus:h,currentStatus:s,pickUpList:f,fetchSearchPickUp:u,fetchSendPickUp:o}});const w=n=>(M("data-v-59b23db1"),n=n(),T(),n),A={class:"fixed top-0 left-0 z-40 w-[315px] h-screen"},F={class:"ml-[315px] bg-white"},J=w(()=>e("nav",{class:"border-b-2 border-textself p-6"},[e("h1",{class:"flex items-center text-[36px] font-bold"},"廚房訂單資訊")],-1)),K={class:"min-h-screen p-6"},G={class:"flex text-xl font-medium text-center break-keep overflow-x-auto mb-6"},H=["onClick"],O={class:"overflow-x-auto flex space-x-2"},Q={class:"flex justify-between px-2 pt-4 rounded-lg bg-bgself-light"},R={class:"text-lg font-medium text-white bg-secondary-light rounded-lg py-1 px-2"},W={class:"flex justify-between p-4 bg-bgself-light"},X=w(()=>e("p",{class:"font-medium text-xl text-primary-light"},"預計製作時間",-1)),Y={class:"font-medium text-xl text-primary-light"},Z={class:"flex flex-col overflow-y-auto max-h-[400px]"},ee={class:"font-medium text-xl"},te={class:"font-medium text-xl text-primary-light my-2"},se={class:"rounded-br-lg rounded-bl-lg bg-bgself-light hover:bg-primary-light hover:text-white text-center"},oe=["onClick"],ae={__name:"ChefView",setup(n){const h=L("https://love-in-no-words-api.zeabur.app/"),s=q();h.on("chef",i=>{i&&(N("收到前台點餐訂單"),s.fetchSearchPickUp())}),V(()=>{s.fetchSearchPickUp()}),$([()=>s.currentStatus],()=>{s.fetchSearchPickUp()},{immediate:!0,deep:!0});const f=g(async i=>{s.fetchSendPickUp(i);const u={message:`'訂單 ${i} 已製作完成，請出餐'`};h.emit("employee",u)});return(i,u)=>(r(),c(m,null,[e("aside",A,[j(B)]),e("section",F,[J,e("main",K,[e("ul",G,[(r(!0),c(m,null,b(p(s).selectStatus,(t,o)=>(r(),c("li",{key:o,class:"mr-2"},[e("a",{onClick:v(a=>p(s).currentStatus=t,["prevent"]),class:z(["block px-6 py-3 rounded-lg hover:text-primary-light hover:bg-white",{"tabbar-active":p(s).currentStatus===t}])},d(t),11,H)]))),128))]),e("ul",O,[(r(!0),c(m,null,b(p(s).pickUpList,t=>(r(),c("li",{key:t.orderNo,class:"min-w-[300px] h-[600px] bg-white flex flex-col justify-between border-2 border-textself rounded-lg shadow"},[e("div",null,[e("div",Q,[e("p",R," 訂單編號 : "+d(t.orderNo),1)]),e("div",W,[X,e("p",Y,d(t.totalTime)+" 分鐘",1)]),e("ul",Z,[(r(!0),c(m,null,b(t.orderList,(o,a)=>(r(),c("li",{key:`${a}${o.productName}`,class:"flex justify-between items-center border-t border-textself p-4"},[e("div",null,[e("h2",ee,[e("span",null,d(o.productName),1),e("span",null," x"+d(o.qty),1)]),e("p",te,"備註："+d(t.note),1)])]))),128))])]),e("div",se,[t.status==="未出餐"?(r(),c("button",{key:0,onClick:v(o=>p(f)(t.orderNo),["prevent"]),type:"button",class:"font-medium text-xl w-full p-4"}," 出餐 ",8,oe)):I("",!0)])]))),128))])])])],64))}},pe=P(ae,[["__scopeId","data-v-59b23db1"]]);export{pe as default};
